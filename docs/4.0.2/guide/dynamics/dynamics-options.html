


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Setting Options for the Dynamics Solvers &mdash; QuTiP 4.0 Documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="QuTiP 4.0 Documentation" href="../../index.html"/>
        <link rel="up" title="Time Evolution and Quantum System Dynamics" href="../guide-dynamics.html"/>
        <link rel="next" title="Solving for Steady-State Solutions" href="../guide-steady.html"/>
        <link rel="prev" title="Floquet Formalism" href="dynamics-floquet.html"/> 

  
  <script src="../../static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> QuTiP: Quantum Toolbox in Python
          

          
          </a>

          
            
            
              <div class="version">
                4.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../frontmatter.html">Frontmatter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../guide.html">Users Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../guide-overview.html">Guide Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide-basics.html">Basic Operations on Quantum Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide-states.html">Manipulating States and Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide-tensor.html">Using Tensor Products and Partial Traces</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../guide-dynamics.html">Time Evolution and Quantum System Dynamics</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="dynamics-data.html">Dynamics Simulation Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamics-master.html">Lindblad Master Equation Solver</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamics-monte.html">Monte Carlo Solver</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamics-bloch-redfield.html">Bloch-Redfield master equation</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamics-time.html">Solving Problems with Time-dependent Hamiltonians</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamics-floquet.html">Floquet Formalism</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Setting Options for the Dynamics Solvers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide-steady.html">Solving for Steady-State Solutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide-eseries.html">An Overview of the Eseries Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide-correlation.html">Two-time correlation functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide-control.html">Quantum Optimal Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide-bloch.html">Plotting on the Bloch Sphere</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide-visualization.html">Visualization of quantum states and processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide-parfor.html">Parallel computation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide-saving.html">Saving QuTiP Objects and Data Sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide-random.html">Generating Random Quantum States &amp; Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide-settings.html">Modifying Internal QuTiP Settings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/apidoc.html">API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributors.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../biblio.html">Bibliography</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">QuTiP: Quantum Toolbox in Python</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../guide.html">Users Guide</a> &raquo;</li>
      
          <li><a href="../guide-dynamics.html">Time Evolution and Quantum System Dynamics</a> &raquo;</li>
      
    <li>Setting Options for the Dynamics Solvers</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="setting-options-for-the-dynamics-solvers">
<span id="options"></span><h1>Setting Options for the Dynamics Solvers<a class="headerlink" href="#setting-options-for-the-dynamics-solvers" title="Permalink to this headline">Â¶</a></h1>
<p>Occasionally it is necessary to change the built in parameters of the dynamics solvers used by for example the <a class="reference internal" href="../../apidoc/functions.html#module-qutip.mesolve" title="qutip.mesolve"><code class="xref py py-func docutils literal"><span class="pre">qutip.mesolve</span></code></a> and <a class="reference internal" href="../../apidoc/functions.html#module-qutip.mcsolve" title="qutip.mcsolve"><code class="xref py py-func docutils literal"><span class="pre">qutip.mcsolve</span></code></a> functions.  The options for all dynamics solvers may be changed by using the Options class <a class="reference internal" href="../../apidoc/classes.html#qutip.solver.Options" title="qutip.solver.Options"><code class="xref py py-class docutils literal"><span class="pre">qutip.solver.Options</span></code></a>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">options</span> <span class="o">=</span> <span class="n">Options</span><span class="p">()</span>
</pre></div>
</div>
<p>the properties and default values of this class can be view via the <cite>print</cite> function:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="k">print</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
<span class="go">Options:</span>
<span class="gt">-----------</span>
<span class="ne">atol</span>:              1e-08
<span class="ne">rtol</span>:              1e-06
<span class="ne">method</span>:            adams
<span class="ne">order</span>:             12
<span class="ne">nsteps</span>:            1000
<span class="ne">first_step</span>:        0
<span class="ne">min_step</span>:          0
<span class="ne">max_step</span>:          0
<span class="ne">tidy</span>:              True
<span class="ne">num_cpus</span>:          0
<span class="ne">norm_tol</span>:          0.001
<span class="ne">norm_steps</span>:        5
<span class="ne">rhs_filename</span>:      None
<span class="ne">rhs_reuse</span>:         False
<span class="ne">seeds</span>:             0
<span class="ne">rhs_with_state</span>:    False
<span class="ne">average_expect</span>:    True
<span class="ne">average_states</span>:    False
<span class="ne">ntraj</span>:             500
<span class="ne">store_states</span>:      False
<span class="ne">store_final_state</span>: False
</pre></div>
</div>
<p>These properties are detailed in the following table.  Assuming <code class="docutils literal"><span class="pre">options</span> <span class="pre">=</span> <span class="pre">Options()</span></code>:</p>
<table border="1" class="table-striped docutils">
<colgroup>
<col width="21%" />
<col width="17%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Default setting</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>options.atol</td>
<td>1e-8</td>
<td>Absolute tolerance</td>
</tr>
<tr class="row-odd"><td>options.rtol</td>
<td>1e-6</td>
<td>Relative tolerance</td>
</tr>
<tr class="row-even"><td>options.method</td>
<td>&#8216;adams&#8217;</td>
<td>Solver method.  Can be &#8216;adams&#8217; (non-stiff) or &#8216;bdf&#8217; (stiff)</td>
</tr>
<tr class="row-odd"><td>options.order</td>
<td>12</td>
<td>Order of solver.  Must be &lt;=12 for &#8216;adams&#8217; and &lt;=5 for &#8216;bdf&#8217;</td>
</tr>
<tr class="row-even"><td>options.nsteps</td>
<td>1000</td>
<td>Max. number of steps to take for each interval</td>
</tr>
<tr class="row-odd"><td>options.first_step</td>
<td>0</td>
<td>Size of initial step.  0 = determined automatically by solver.</td>
</tr>
<tr class="row-even"><td>options.min_step</td>
<td>0</td>
<td>Minimum step size.  0 = determined automatically by solver.</td>
</tr>
<tr class="row-odd"><td>options.max_step</td>
<td>0</td>
<td>Maximum step size.  0 = determined automatically by solver.</td>
</tr>
<tr class="row-even"><td>options.tidy</td>
<td>True</td>
<td>Whether to run tidyup function on time-independent Hamiltonian.</td>
</tr>
<tr class="row-odd"><td>options.num_cpus</td>
<td>installed num
of processors</td>
<td>Integer number of cpu&#8217;s used by mcsolve.</td>
</tr>
<tr class="row-even"><td>options.rhs_filename</td>
<td>None</td>
<td>RHS filename when using compiled time-dependent Hamiltonians.</td>
</tr>
<tr class="row-odd"><td>options.rhs_reuse</td>
<td>False</td>
<td>Reuse compiled RHS function.  Useful for repeatative tasks.</td>
</tr>
<tr class="row-even"><td>options.gui</td>
<td>True (if GUI)</td>
<td>Use the mcsolve progessbar. Defaults to False on Windows.</td>
</tr>
<tr class="row-odd"><td>options.mc_avg</td>
<td>True</td>
<td>Average over trajectories for expectation values from mcsolve.</td>
</tr>
</tbody>
</table>
<p>As an example, let us consider changing the number of processors used, turn the GUI off, and strengthen the absolute tolerance.  There are two equivalent ways to do this using the Options class.  First way,</p>
<p>or one can use an inline method,</p>
<p>Note that the order in which you input the options does not matter.  Using either method, the resulting <cite>options</cite> variable is now:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="k">print</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
<span class="go">Options:</span>
<span class="gt">-----------</span>
<span class="ne">atol</span>:              1e-08
<span class="ne">rtol</span>:              1e-06
<span class="ne">method</span>:            adams
<span class="ne">order</span>:             12
<span class="ne">nsteps</span>:            1000
<span class="ne">first_step</span>:        0
<span class="ne">min_step</span>:          0
<span class="ne">max_step</span>:          0
<span class="ne">tidy</span>:              True
<span class="ne">num_cpus</span>:          0
<span class="ne">norm_tol</span>:          0.001
<span class="ne">norm_steps</span>:        5
<span class="ne">rhs_filename</span>:      None
<span class="ne">rhs_reuse</span>:         False
<span class="ne">seeds</span>:             0
<span class="ne">rhs_with_state</span>:    False
<span class="ne">average_expect</span>:    True
<span class="ne">average_states</span>:    False
<span class="ne">ntraj</span>:             500
<span class="ne">store_states</span>:      False
<span class="ne">store_final_state</span>: False
</pre></div>
</div>
<p>To use these new settings we can use the keyword argument <code class="docutils literal"><span class="pre">options</span></code> in either the func:<cite>qutip.mesolve</cite> and <a class="reference internal" href="../../apidoc/functions.html#module-qutip.mcsolve" title="qutip.mcsolve"><code class="xref py py-func docutils literal"><span class="pre">qutip.mcsolve</span></code></a> function.  We can modify the last example as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mesolve</span><span class="p">(</span><span class="n">H0</span><span class="p">,</span> <span class="n">psi0</span><span class="p">,</span> <span class="n">tlist</span><span class="p">,</span> <span class="n">c_op_list</span><span class="p">,</span> <span class="p">[</span><span class="n">sigmaz</span><span class="p">()],</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mesolve</span><span class="p">(</span><span class="n">hamiltonian_t</span><span class="p">,</span> <span class="n">psi0</span><span class="p">,</span> <span class="n">tlist</span><span class="p">,</span> <span class="n">c_op_list</span><span class="p">,</span> <span class="p">[</span><span class="n">sigmaz</span><span class="p">()],</span> <span class="n">H_args</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mcsolve</span><span class="p">(</span><span class="n">H0</span><span class="p">,</span> <span class="n">psi0</span><span class="p">,</span> <span class="n">tlist</span><span class="p">,</span> <span class="n">ntraj</span><span class="p">,</span><span class="n">c_op_list</span><span class="p">,</span> <span class="p">[</span><span class="n">sigmaz</span><span class="p">()],</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mcsolve</span><span class="p">(</span><span class="n">hamiltonian_t</span><span class="p">,</span> <span class="n">psi0</span><span class="p">,</span> <span class="n">tlist</span><span class="p">,</span> <span class="n">ntraj</span><span class="p">,</span> <span class="n">c_op_list</span><span class="p">,</span> <span class="p">[</span><span class="n">sigmaz</span><span class="p">()],</span> <span class="n">H_args</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../guide-steady.html" class="btn btn-neutral float-right" title="Solving for Steady-State Solutions" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dynamics-floquet.html" class="btn btn-neutral" title="Floquet Formalism" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2011 and later, P.D. Nation, J.R. Johansson, A.J.G. Pitchford, C. Granade, and A.L. Grimsmo.
      Last updated on Jan 11, 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'4.0.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../static/jquery.js"></script>
      <script type="text/javascript" src="../../static/underscore.js"></script>
      <script type="text/javascript" src="../../static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>